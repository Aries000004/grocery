<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>

		<style>
			#container {
				width: 802px;
				height: 402px;
				border: 1px solid black;
				margin: 0 auto;
			}
			
			#pannel {
				width: 802px;
				margin: 0 auto;
			}
			
			.piece {
				width: 80px;
				height: 80px;
				float: left;
			}
		</style>
	</head>

	<body>

		<div id="container">
		</div>
		<div id="pannel">
			<button id="addBtn">添加</button>
			<button id="flaBtn">闪烁</button>
		</div>

		<script src="js/ex02.js"></script>

		<script>
			function randomColor() {
				var r = parseInt(Math.random() * 256);
				var g = parseInt(Math.random() * 256);
				var b = parseInt(Math.random() * 256);
				return 'rgb(' + r + ',' + g + ',' + b + ')';
			}

			(function() {
				var counter = 0;
				$('addBtn').addEventListener('click', function() {
					if(counter < 50) {
						counter += 1;
						var div = document.createElement('div');
						div.className = 'piece';
						div.style.backgroundColor = randomColor();
						$('container').insertBefore(div, $('container').firstChild);
						//$('container').appendChild(div);
					}
				});

				var timer = 0;
				$('flaBtn').addEventListener('click', function(evt) {
					if(!timer) {
						timer = window.setInterval(function() {
							var allPieces = $('container').children;
							for(var i = 0; i < allPieces.length; i += 1) {
								allPieces[i].style.backgroundColor = randomColor();
							}						
						})
					}
					evt.target.textContent = '停止';
				}, 1000)

			}());

		</script>
	</body>

</html>